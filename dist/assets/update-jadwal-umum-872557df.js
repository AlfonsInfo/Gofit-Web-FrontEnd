import{_ as S,d as H,r as g,o as r,c as d,a as t,b as v,l as M,w as p,z as w,F as _,q as k,v as y,H as B,B as D,u as K,h as I,$ as o,t as b,p as $,n as V,k as U}from"./index-b7f4b6dc.js";import"https://code.jquery.com/jquery-3.5.1.js";import"https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js";import"https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js";import"https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js";import"https://cdn.datatables.net/buttons/2.3.6/js/buttons.print.min.js";import"https://code.highcharts.com/highcharts.js";const A=H({components:{HomeNavbar:B,BackButton:D},data(){return{router:K(),days:["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"],selectedDay:"senin",instrukturs:{},kelas:{},jadwals:I({}),jadwal:I({})}},methods:{goBack(){o&&this.toast.goAway(0)},async getAllInstruktur(){const a="/instruktur",e=await this.$http.get(a);this.instrukturs.value=e.data.data},async getAllKelas(){const a="/kelas",e=await this.$http.get(a);this.kelas.value=e.data.kelas},async getAllJadwal(){const a="/jadwalumum",e=await this.$http.get(a);this.jadwals.value=e.data.data},submitForm(){console.log(event),event.preventDefault(),this.updateJadwal()},isValid({hari:a,id_instruktur:e,id_kelas:u,jam_mulai:c,jam_selesai:i}){let n=!0;return a||(o.warning("Hari harus diisi"),n=!1),e||(o.warning("Nama Instruktur Harus Diisi"),n=!1),u||(o.warning("Kelas harus diisi"),n=!1),c||(o.warning("Jam Mulai harus diisi"),n=!1),i||(o.warning("Jam Selesai harus diisi"),n=!1),parseInt(c.replace(":",""))>parseInt(i.replace(":",""))&&(o.warning("Jam selesai harus setelah jam Mulai"),n=!1),n},isNotConflict(a){let e=!0,u=Object.values(this.jadwals.value).flatMap(i=>Object.values(i)).flat();return console.log("input jadwal",a),u.filter(i=>{const n=parseInt(a.jam_mulai.replace(":","")),h=parseInt(a.jam_selesai.replace(":","")),f=parseInt(i.jam_mulai.replace(":","")),s=parseInt(i.jam_selesai.replace(":","")),m=i.hari==a.hari,J=i.id_instruktur==a.id_instruktur,j=n<s&&h>f;return m&&J&&j&&i.id_jadwal_umum!=a.id_jadwal_umum?(console.log("kondisi konflik jadwal",j),o.warning("Jadwal Bentrok  "+i.kelas.jenis_kelas),i):null}).length>null&&(e=!1),console.log(e),e},async updateJadwal(){const a=this.isValid(this.jadwal),e=this.isNotConflict(this.jadwal);if(a&&e)try{const u=`/jadwalumum/${this.jadwal.id_jadwal_umum}`,c=await this.$http.put(u,this.jadwal);o.success(c.data.message),this.router.push({name:"jadwal-umum"})}catch{o.warning("Gagal Menambahkan Data")}}},mounted(){this.getAllInstruktur(),this.getAllKelas(),this.getAllJadwal(),this.jadwal=this.$route.query,console.log(this.jadwal),window.onpopstate=()=>{this.goBack()}}}),l=a=>($("data-v-e8154929"),a=a(),V(),a),P={class:"content text-white p-5 mt-5"},x=l(()=>t("h2",null,null,-1)),N={class:"container-fluid form-custom p-4 text-dark",ref:"sectionForm"},C=l(()=>t("div",{class:"d-flex justify-content-between"},[t("h3",{class:"title"},[U("Form Tambah Jadwal "),t("span",{class:"mdi mdi-calendar"})])],-1)),q=l(()=>t("hr",null,null,-1)),F={class:"mb-3"},R=l(()=>t("label",{for:"nama_member",class:"form-label"},"Pilih Hari Untuk Melaksanakan Kelas",-1)),T=l(()=>t("option",{selected:""},"Pilih Hari Untuk Melaksanakan Kelas",-1)),G=l(()=>t("div",{id:"namaHelp",class:"form-text"},"ex : Laksanakan Kelas Pada Hari Senin",-1)),L={class:"mb-3"},O=l(()=>t("label",{for:"nama_member",class:"form-label"},"Pilih Instruktur Kelas",-1)),z=l(()=>t("option",{selected:"",default:"",disabled:""},"Pilih Instruktur Kelas",-1)),E=["value"],Q=l(()=>t("div",{id:"namaHelp",class:"form-text"},"ex : Instruktur Penanggung Jawab Ucup Surucup",-1)),W={class:"mb-3"},X=l(()=>t("label",{for:"nama_member",class:"form-label"},"Pilih Kelas",-1)),Y=l(()=>t("option",{selected:"",default:"",disabled:""},"Pilih Kelas ",-1)),Z=["value"],aa=l(()=>t("div",{id:"namaHelp",class:"form-text"},"ex : Kelas Pilates",-1)),ta={class:"mb-3"},ea=l(()=>t("label",{for:"notelp",class:"form-label"},"Jam Mulai",-1)),sa=l(()=>t("div",{id:"namaHelp",class:"form-text"},"ex : 08:00",-1)),la={class:"mb-3"},ia=l(()=>t("label",{for:"notelp",class:"form-label"},"Jam Selesai",-1)),na=l(()=>t("div",{id:"namaHelp",class:"form-text"},"ex : 09:00",-1)),oa={class:"d-flex justify-content-between"},ra=l(()=>t("button",{type:"submit",class:"btn btn-primary"},"Submit",-1)),da=l(()=>t("hr",null,null,-1));function ua(a,e,u,c,i,n){const h=g("home-navbar"),f=g("back-button");return r(),d(_,null,[t("header",null,[v(h,{message:"Gofit -  Tambah Data Jadwal"})]),t("main",null,[t("div",P,[x,t("div",N,[C,q,t("form",{onSubmit:e[5]||(e[5]=M(s=>a.submitForm(s),["prevent"]))},[t("div",F,[R,p(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.jadwal.hari=s),class:"form-select","aria-label":"Default select example"},[T,(r(!0),d(_,null,k(a.days,s=>(r(),d("option",{key:s},b(s),1))),128))],512),[[w,a.jadwal.hari]]),G]),t("div",L,[O,p(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.jadwal.id_instruktur=s),class:"form-select","aria-label":"Default select example"},[z,(r(!0),d(_,null,k(a.instrukturs.value,(s,m)=>(r(),d("option",{key:m,value:s.id_instruktur},b(s.nama_instruktur),9,E))),128))],512),[[w,a.jadwal.id_instruktur]]),Q]),t("div",W,[X,p(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.jadwal.id_kelas=s),class:"form-select","aria-label":"Default select example"},[Y,(r(!0),d(_,null,k(a.kelas.value,(s,m)=>(r(),d("option",{key:m,value:s.id_kelas},b(s.jenis_kelas),9,Z))),128))],512),[[w,a.jadwal.id_kelas]]),aa]),t("div",ta,[ea,p(t("input",{type:"time","onUpdate:modelValue":e[3]||(e[3]=s=>a.jadwal.jam_mulai=s),class:"form-control",id:"notelp"},null,512),[[y,a.jadwal.jam_mulai]]),sa]),t("div",la,[ia,p(t("input",{type:"time","onUpdate:modelValue":e[4]||(e[4]=s=>a.jadwal.jam_selesai=s),class:"form-control",id:"notelp"},null,512),[[y,a.jadwal.jam_selesai]]),na]),t("div",oa,[v(f,{className:"btn btn-dark",onClick:a.goBack},null,8,["onClick"]),ra])],32),da],512)])])],64)}const ka=S(A,[["render",ua],["__scopeId","data-v-e8154929"]]);export{ka as default};
