import{_ as L,d as Y,r as K,o,c as i,a,b as x,l as D,w as g,z as P,F as k,q as h,v as U,H as z,B as E,$ as c,u as Q,g as J,i as W,h as V,j as X,t as f,y as Z,p as aa,n as ea,k as ta}from"./index-b7f4b6dc.js";import{c as sa}from"./function-2d16a083.js";import"https://code.jquery.com/jquery-3.5.1.js";import"https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js";import"https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js";import"https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js";import"https://cdn.datatables.net/buttons/2.3.6/js/buttons.print.min.js";import"https://code.highcharts.com/highcharts.js";const la=Y({components:{HomeNavbar:z,BackButton:E},name:"create-jadwal-umum",data(){return{toggle:!0,toggleModeTabel:!1}},methods:{goBack(){c&&this.toast.goAway(0)},scrollToSection(e){this.$refs[e].scrollIntoView({behavior:"smooth",inline:"center"})}},mounted(){window.onpopstate=()=>{this.goBack()}},setup(){const e=Q();let s=J([]),j=J([]),I=J([]),M=J([]);const w=W("$http"),C=["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"],y={},t=async()=>{const n="/instruktur",r=await w.get(n);y.value=r.data.data},m={},u=async()=>{const n="/kelas",r=await w.get(n);m.value=r.data.kelas},_=V({hari:"",id_instruktur:"",id_kelas:"",jam_mulai:"",jam_selesai:""}),S=V({}),H=async()=>{const n="/jadwalumum",r=await w.get(n);S.value=r.data.data,s.value=r.data.data.pagi,I.value=Math.max(...Object.values(s.value).map(p=>p.length)),j.value=r.data.data.sore,M.value=Math.max(...Object.values(j.value).map(p=>p.length))};X(async()=>{t(),u(),H()});const T=n=>{console.log(n),n.preventDefault(),sa("Yakin ingin menambahkan data jadwal ini? ","question","blue","Yakin",$)};function N({hari:n,id_instruktur:r,id_kelas:p,jam_mulai:v,jam_selesai:d}){let b=!0;return n||(c.warning("Hari harus diisi"),b=!1),r||(c.warning("Nama Instruktur Harus Diisi"),b=!1),p||(c.warning("Kelas harus diisi"),b=!1),v||(c.warning("Jam Mulai harus diisi"),b=!1),d||(c.warning("Jam Selesai harus diisi"),b=!1),parseInt(v.replace(":",""))>parseInt(d.replace(":",""))&&(c.warning("Jam selesai harus setelah jam mulai"),b=!1),b}function q(n){let r=!0,p=Object.values(S.value).flatMap(d=>Object.values(d)).flat();return console.log("input jadwal",n),p.filter(d=>{const b=parseInt(n.jam_mulai.replace(":","")),A=parseInt(n.jam_selesai.replace(":","")),F=parseInt(d.jam_mulai.replace(":","")),R=parseInt(d.jam_selesai.replace(":","")),O=d.hari==n.hari,G=d.id_instruktur==n.id_instruktur,B=b<R&&A>F;return O&&G&&B?(console.log("kondisi konflik jadwal",B),c.warning("Jadwal Bentrok  "+d.kelas.jenis_kelas),d):null}).length>null&&(r=!1),console.log(r),r}const $=async()=>{const n=N(_),r=q(_);if(n&&r)try{const p="/jadwalumum",v=await w.post(p,_);c.success(v.data.message),H()}catch{c.warning("Gagal Menambahkan Data")}};return{router:e,jadwal:_,storeJadwal:$,submitForm:T,days:C,kelas:m,instrukturs:y,jadwalPagi:s,jadwalSore:j,maxPagi:I,maxSore:M}},computed:{displayedJadwal(){return this.toggle?this.jadwalPagi:this.jadwalSore},max(){return this.toggle?this.maxPagi:this.maxSore}}}),l=e=>(aa("data-v-fd93405a"),e=e(),ea(),e),na={class:"content text-white p-5 mt-5"},oa=l(()=>a("h2",null,null,-1)),ia={class:"container-fluid form-custom p-4 text-dark",ref:"sectionForm"},ra={class:"d-flex justify-content-between"},da=l(()=>a("h3",{class:"title"},[ta("Form Tambah Jadwal "),a("span",{class:"mdi mdi-calendar"})],-1)),ua=l(()=>a("hr",null,null,-1)),ca={class:"mb-3"},ma=l(()=>a("label",{for:"nama_member",class:"form-label"},"Pilih Hari Untuk Melaksanakan Kelas",-1)),pa=l(()=>a("option",{selected:""},"Pilih Hari Untuk Melaksanakan Kelas",-1)),ba=l(()=>a("div",{id:"namaHelp",class:"form-text"},"ex : Laksanakan Kelas Pada Hari Senin",-1)),fa={class:"mb-3"},ka=l(()=>a("label",{for:"nama_member",class:"form-label"},"Pilih Instruktur Kelas",-1)),ha=l(()=>a("option",{selected:"",default:"",disabled:""},"Pilih Instruktur Kelas",-1)),_a=["value"],ga=l(()=>a("div",{id:"namaHelp",class:"form-text"},"ex : Instruktur Penanggung Jawab Ucup Surucup",-1)),wa={class:"mb-3"},va=l(()=>a("label",{for:"nama_member",class:"form-label"},"Pilih Kelas",-1)),ja=l(()=>a("option",{selected:"",default:"",disabled:""},"Pilih Kelas ",-1)),ya=["value"],Sa=l(()=>a("div",{id:"namaHelp",class:"form-text"},"ex : Kelas Pilates",-1)),Ja={class:"mb-3"},Ia=l(()=>a("label",{for:"notelp",class:"form-label"},"Jam Mulai",-1)),Ma=l(()=>a("div",{id:"namaHelp",class:"form-text"},"ex : 08:00",-1)),Ca={class:"mb-3"},Da=l(()=>a("label",{for:"notelp",class:"form-label"},"Jam Selesai",-1)),Pa=l(()=>a("div",{id:"namaHelp",class:"form-text"},"ex : 09:00",-1)),Ha={class:"d-flex justify-content-between"},$a=l(()=>a("button",{type:"submit",class:"btn btn-primary"},"Submit",-1)),Ba=l(()=>a("hr",null,null,-1)),Ka={class:"container-fluid form-custom p-4 text-dark mt-5",ref:"sectionTable"},xa={class:"table table-dark table-striped table-bordered table-hover mt-4 scrollme"},Ua={class:"text-white bg-dark text-center"},Va=l(()=>a("th",null,"#",-1)),Ta={scope:"row",class:"text-white bg-dark text-center"},Na=["onClick"],qa=["onClick"];function Aa(e,s,j,I,M,w){const C=K("home-navbar"),y=K("back-button");return o(),i(k,null,[a("header",null,[x(C,{message:"Gofit -  Tambah Data Jadwal"})]),a("main",null,[a("div",na,[oa,a("div",ia,[a("div",ra,[da,a("button",{class:"btn btn-outline-dark",onClick:s[0]||(s[0]=t=>e.scrollToSection("sectionTable"))},"Cek Jadwal")]),ua,a("form",{onSubmit:s[6]||(s[6]=D(t=>e.submitForm(t),["prevent"]))},[a("div",ca,[ma,g(a("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>e.jadwal.hari=t),class:"form-select","aria-label":"Default select example"},[pa,(o(!0),i(k,null,h(e.days,t=>(o(),i("option",{key:t},f(t),1))),128))],512),[[P,e.jadwal.hari]]),ba]),a("div",fa,[ka,g(a("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>e.jadwal.id_instruktur=t),class:"form-select","aria-label":"Default select example"},[ha,(o(!0),i(k,null,h(e.instrukturs.value,(t,m)=>(o(),i("option",{key:m,value:t.id_instruktur},f(t.nama_instruktur),9,_a))),128))],512),[[P,e.jadwal.id_instruktur]]),ga]),a("div",wa,[va,g(a("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>e.jadwal.id_kelas=t),class:"form-select","aria-label":"Default select example"},[ja,(o(!0),i(k,null,h(e.kelas.value,(t,m)=>(o(),i("option",{key:m,value:t.id_kelas},f(t.jenis_kelas),9,ya))),128))],512),[[P,e.jadwal.id_kelas]]),Sa]),a("div",Ja,[Ia,g(a("input",{type:"time","onUpdate:modelValue":s[4]||(s[4]=t=>e.jadwal.jam_mulai=t),class:"form-control",id:"notelp"},null,512),[[U,e.jadwal.jam_mulai]]),Ma]),a("div",Ca,[Da,g(a("input",{type:"time","onUpdate:modelValue":s[5]||(s[5]=t=>e.jadwal.jam_selesai=t),class:"form-control",id:"notelp"},null,512),[[U,e.jadwal.jam_selesai]]),Pa]),a("div",Ha,[x(y,{className:"btn btn-dark",onClick:e.goBack},null,8,["onClick"]),$a])],32),Ba],512),a("div",null,[a("div",Ka,[a("div",null,[e.toggle?(o(),i("button",{key:0,type:"button",class:"btn btn-outline-dark",onClick:s[7]||(s[7]=t=>e.toggle=!e.toggle)},"Jadwal Malam")):(o(),i("button",{key:1,type:"button",class:"btn btn-outline-dark",onClick:s[8]||(s[8]=t=>e.toggle=!e.toggle)},"Jadwal Pagi"))]),a("table",xa,[a("thead",null,[a("tr",Ua,[Va,(o(!0),i(k,null,h(e.max,t=>(o(),i("th",{key:t},"Jadwal "+f(t),1))),128))])]),a("tbody",null,[(o(!0),i(k,null,h(e.displayedJadwal,(t,m)=>(o(),i("tr",{key:m},[a("th",Ta,f(m),1),(o(!0),i(k,null,h(t,(u,_)=>(o(),i("td",{key:_,class:"text-center"},[a("p",null," Jadwal : "+f(u.jam_mulai)+" - "+f(u.jam_selesai),1),a("p",null," Nama Kelas : "+f(u.kelas.jenis_kelas),1),a("p",null," Instruktur : "+f(u.instruktur.nama_instruktur),1),g(a("div",null,[a("button",{class:"btn btn-warning m-2",onClick:D(S=>e.updateDataCell(u),["prevent"])},"Update",8,Na),a("button",{class:"btn btn-danger",onClick:D(S=>e.deleteDataCell(u),["prevent"])},"Delete",8,qa)],512),[[Z,e.toggleModeTabel]])]))),128)),(o(!0),i(k,null,h(e.max-t.length,u=>(o(),i("td",{key:u,class:"text-center"},"*"))),128))]))),128))])])],512)])])])],64)}const Qa=L(la,[["render",Aa],["__scopeId","data-v-fd93405a"]]);export{Qa as default};
