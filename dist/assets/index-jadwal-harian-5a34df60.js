import{_ as C,d as T,r as _,o as r,c as l,a as t,b as f,w as v,v as M,F as p,q as b,H as S,B as $,i as x,g as y,h as I,j as D,t as u,x as w,y as H,l as A,$ as g,S as k,p as N,n as G}from"./index-b7f4b6dc.js";import"https://code.jquery.com/jquery-3.5.1.js";import"https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js";import"https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js";import"https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js";import"https://cdn.datatables.net/buttons/2.3.6/js/buttons.print.min.js";import"https://code.highcharts.com/highcharts.js";const L=T({components:{HomeNavbar:S,BackButton:$},data(){return{toggleModeTabel:!1}},setup(){const e=x("$http");let n=y([]),d=y([]);const c=I({searchInput:""}),o=async m=>{const a="/jadwalharian",i=await e.get(a);n.value=i.data.data,console.log(n.value),d.value=Math.max(...Object.values(n.value).map(s=>s.length)),g.success(m)};return D(async()=>{o("Mendapatkan data jadwal")}),{state:c,jadwalHarian:n,confirmChangeStatus:async({id_jadwal_harian:m})=>{if((await k.fire({title:"Apakah Anda yakin ingin meliburkan jadwal ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",confirmButtonText:"Liburkan",cancelButtonText:"Batal"})).isConfirmed){const i=`/jadwalharianlibur/${m}`;console.log(i);const s=await e.get(i);o("Tabel Data Jadwal di update"),g.success(s.data.message),k.fire({title:"Jadwal Berhasil diliburkan!",icon:"success",timer:2e3,timerProgressBar:!0,showConfirmButton:!1})}},maxJadwal:d,generateJadwal:async()=>{if((await k.fire({title:"Apakah Anda yakin ingin melakukan generate jadwal untuk minggu ini ?",icon:"info",showCancelButton:!0,confirmButtonColor:"blue",confirmButtonText:"Generate",cancelButtonText:"Batal"})).isConfirmed)try{const a="/jadwalharian",i=await e.post(a,{});console.log(i),o("Tabel Data Jadwal Berhasil digenerate"),g.success(i.data.message),k.fire({title:"Data berhasil digenerate!",icon:"success",timer:2e3,timerProgressBar:!0,showConfirmButton:!1})}catch(a){console.log(a.response.data.message),g.info("Gagal Generate")}}}},computed:{displayedJadwal(){let e=this.state.searchInput,n=Object.entries(this.jadwalHarian);return e!==""&&(n=n.filter(([d,c])=>d.includes(e)||Object.values(c).some(function(o){return o.jadwal_umum.kelas.jenis_kelas.includes(e)||o.jadwal_umum.instruktur.nama_instruktur.includes(e)})).map(([d,c])=>[d,c.filter(o=>o.jadwal_umum.kelas.jenis_kelas.includes(e))])),n}}}),j=e=>(N("data-v-1e906abb"),e=e(),G(),e),O={class:"content text-white p-5"},V=j(()=>t("h2",{class:""},"Jadwal Harian",-1)),P={class:"input-group mt-3 mb-2"},U={class:"class='container-fluid table-custom p-4 text-dark'"},E={class:"table table-dark table-striped table-bordered table-hover mt-4 scrollme"},F={class:"text-white bg-dark text-center"},q=j(()=>t("th",null,"#",-1)),K={scope:"row",class:"text-white bg-dark text-center"},R={key:0},z={key:1,class:"bg-success rounded p-2"},Q={key:2,class:"bg-danger rounded p-2"},W={key:3},X=["onClick"],Y={class:"d-flex justify-content-between"};function Z(e,n,d,c,o,B){const h=_("home-navbar"),m=_("back-button");return r(),l(p,null,[t("header",null,[f(h,{message:"Olah Jadwal Umum"})]),t("main",null,[t("div",O,[V,t("div",P,[v(t("input",{type:"search",class:"form-control rounded me-2",placeholder:"Cari Jadwal","aria-label":"Search","aria-describedby":"search-addon","onUpdate:modelValue":n[0]||(n[0]=a=>e.state.searchInput=a)},null,512),[[M,e.state.searchInput]]),t("button",{class:"btn btn-primary",onClick:n[1]||(n[1]=(...a)=>e.generateJadwal&&e.generateJadwal(...a))},"Generate Jadwal +")]),t("div",U,[t("table",E,[t("thead",null,[t("tr",F,[q,(r(!0),l(p,null,b(e.maxJadwal,a=>(r(),l("th",{key:a},"Jadwal "+u(a),1))),128))])]),t("tbody",null,[(r(!0),l(p,null,b(e.displayedJadwal,(a,i)=>(r(),l("tr",{key:i},[t("th",K,[t("p",null,u(a[0])+" "+u(new Date(a[0]).toLocaleDateString("en-US",{weekday:"long"})),1)]),(r(!0),l(p,null,b(a[1],(s,J)=>(r(),l("td",{key:J},[t("p",null," Kelas : "+u(s.jadwal_umum.kelas.jenis_kelas),1),t("p",null,u(s.jadwal_umum.jam_mulai)+" - "+u(s.jadwal_umum.jam_selesai),1),s.ijin_instruktur==null?(r(),l("p",R," Instruktur : "+u(s.jadwal_umum.instruktur.nama_instruktur),1)):s.ijin_instruktur.status_ijin=="Perijinan dikonfirmasi"?(r(),l("p",z,u(s.ijin_instruktur.instruktur_pengganti.nama_instruktur)+" (menggantikan "+u(s.ijin_instruktur.instruktur.nama_instruktur)+") ",1)):w("",!0),s.status=="diliburkan"?(r(),l("p",Q," Diliburkan🙏 ")):w("",!0),s.status!="diliburkan"?v((r(),l("div",W,[t("button",{class:"btn btn-warning m-2",onClick:A(ee=>e.confirmChangeStatus(s),["prevent"])},"Liburkan",8,X)],512)),[[H,e.toggleModeTabel]]):w("",!0)]))),128)),(r(!0),l(p,null,b(e.maxJadwal-a[1].length,s=>(r(),l("td",{key:s,class:"text-center"},"*"))),128))]))),128))])]),t("div",Y,[t("div",null,[e.toggleModeTabel?(r(),l("button",{key:1,class:"btn btn-success",onClick:n[3]||(n[3]=a=>e.toggleModeTabel=!e.toggleModeTabel)},"Mode Tampil")):(r(),l("button",{key:0,class:"btn btn-primary",onClick:n[2]||(n[2]=a=>e.toggleModeTabel=!e.toggleModeTabel)},"Mode Edit"))]),f(m,{className:"btn btn-dark"})])])])])],64)}const ie=C(L,[["render",Z],["__scopeId","data-v-1e906abb"]]);export{ie as default};
